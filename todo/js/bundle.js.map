{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","js/app.coffee","js/actions/TodoAction.coffee","js/components/app.tag","js/components/todo-count.tag","js/components/todo-item.tag","js/components/todo-remove.tag","js/components/todo.tag","js/riotcontrol.js","js/stores/TodoStore.coffee","node_modules/riot/riot.js"],"names":[],"mappings":"AAAA;ACAA,IAAA,4BAAA;;AAAA,IAAA,GAAO,OAAA,CAAS,MAAT,CAAP,CAAA;;AAAA,SACA,GAAY,OAAA,CAAS,2BAAT,CADZ,CAAA;;AAAA,WAEA,GAAc,OAAA,CAAS,kBAAT,CAFd,CAAA;;AAAA,OAIA,CAAS,sBAAT,CAJA,CAAA;;AAAA,OAKA,CAAS,uBAAT,CALA,CAAA;;AAAA,OAMA,CAAS,6BAAT,CANA,CAAA;;AAAA,OAOA,CAAS,8BAAT,CAPA,CAAA;;AAAA,OAQA,CAAS,4BAAT,CARA,CAAA;;AAAA,WAUW,CAAC,QAAZ,CAAqB,GAAA,CAAA,SAArB,CAVA,CAAA;;AAAA,IAWI,CAAC,KAAL,CAAY,GAAZ,CAXA,CAAA;;;;;ACAA,IAAA,uBAAA;;AAAA,WAAA,GAAc,OAAA,CAAS,gBAAT,CAAd,CAAA;;AAAA,UAEA,GACE;AAAA,EAAA,GAAA,EAAK,SAAC,IAAD,GAAA;WACH,WAAW,CAAC,OAAZ,CAAqB,UAArB,EAAgC;AAAA,MAAC,KAAA,EAAO,IAAR;AAAA,MAAc,IAAA,EAAM,KAApB;KAAhC,EADG;EAAA,CAAL;AAAA,EAEA,MAAA,EAAQ,SAAC,IAAD,GAAA;WACN,WAAW,CAAC,OAAZ,CAAqB,aAArB,EAAmC,IAAI,CAAC,EAAxC,EADM;EAAA,CAFR;AAAA,EAIA,OAAA,EAAS,SAAC,IAAD,GAAA;WACP,WAAW,CAAC,OAAZ,CAAqB,aAArB,EAAmC,IAAI,CAAC,EAAxC,EADO;EAAA,CAJT;AAAA,EAMA,gBAAA,EAAkB,SAAA,GAAA;WAChB,WAAW,CAAC,OAAZ,CAAqB,sBAArB,EADgB;EAAA,CANlB;CAHF,CAAA;;AAAA,MAYM,CAAC,OAAP,GAAiB,UAZjB,CAAA;;;;;ACAA;AACA;AACA;AACA;AACA;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACxCA,IAAI,WAAW,GAAG;AAChB,SAAO,EAAE,EAAE;AACX,UAAQ,EAAA,kBAAC,KAAK,EAAE;AACd,QAAI,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAA;GACzB;AACD,SAAO,EAAA,mBAAG;AACR,QAAI,IAAI,GAAG,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,CAAA;AACjC,QAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAS,EAAE,EAAC;AAC/B,QAAE,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC,CAAA;KAC7B,CAAC,CAAA;GACL;AACD,IAAE,EAAA,YAAC,EAAE,EAAE,EAAE,EAAE;AACT,QAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAS,EAAE,EAAC;AAC/B,QAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAA;KACd,CAAC,CAAA;GACH;AACD,KAAG,EAAA,aAAC,EAAE,EAAE,EAAE,EAAE;AACV,QAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAS,EAAE,EAAC;AAC/B,UAAI,EAAE,EACJ,EAAE,CAAC,GAAG,CAAC,EAAE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;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"bundle.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","riot = require('riot')\nTodoStore = require('./stores/TodoStore.coffee')\nRiotControl = require('./riotcontrol.js')\n\nrequire('./components/app.tag')\nrequire('./components/todo.tag')\nrequire('./components/todo-count.tag')\nrequire('./components/todo-remove.tag')\nrequire('./components/todo-item.tag')\n\nRiotControl.addStore(new TodoStore)\nriot.mount('*')\n","RiotControl = require('../riotcontrol')\n\nTodoAction =\n  add: (text) ->\n    RiotControl.trigger('todo_add', {title: text, done: false})\n  toggle: (task)->\n    RiotControl.trigger('todo_toggle', task.id)\n  destroy: (task)->\n    RiotControl.trigger('todo_remove', task.id)\n  destroyCompleted: ->\n    RiotControl.trigger('todo_removeCompleted')\n\nmodule.exports = TodoAction\n","var riot = require('riot');\n\nriot.tag('app', '<header class=\"navbar navbar-default navbar-static-top\"><div class=\"container\"><div class=\"navbar-header\"><div class=\"navbar-brand\">Todo</div></div><nav class=\"collapse navbar-collapse\"><ul class=\"nav navbar-nav navbar-right\"><li><a><todo-count></todo-count></a></li></ul></nav></div></header><div class=\"container\"><todo title=\"Demo\" class=\"col-md-6 col-md-offset-3\"></todo></div>', function(opts) {\n\n});","var riot = require('riot');\n\nriot.tag('todo-count', '<span class=\"badge\">{ count }</span><span> items left</span>', function(opts) {var RiotControl;\n\nRiotControl = require('../riotcontrol');\n\nthis.count = 0;\n\nthis.on('mount', (function(_this) {\n  return function() {\n    return RiotControl.trigger('todo_init');\n  };\n})(this));\n\nRiotControl.on('todos_changed', (function(_this) {\n  return function(todos) {\n    var item, _;\n    _this.count = ((function() {\n      var _results;\n      _results = [];\n      for (_ in todos) {\n        item = todos[_];\n        if (item.done === false) {\n          _results.push(item);\n        }\n      }\n      return _results;\n    })()).length;\n    return _this.update();\n  };\n})(this));\n\n});","var riot = require('riot');\n\nriot.tag('todo-item', '<div onmouseover=\"{ hover }\" onmouseout=\"{ unhover }\" class=\"clearfix todo { completed: opts.task.done }\"><label><input type=\"checkbox\" onclick=\"{ toggle }\" __checked=\"{ opts.task.done }\"><span> { opts.task.title } </span></label><button show=\"{isHover}\" onclick=\"{ remove }\" class=\"pull-right btn btn-xs btn-default\"><span class=\"glyphicon glyphicon-remove\"></span></button></div>', function(opts) {var RiotControl, TodoAction;\n\nRiotControl = require('../riotcontrol');\n\nTodoAction = require('../actions/TodoAction.coffee');\n\nthis.isHover = false;\n\nthis.toggle = (function(_this) {\n  return function(e) {\n    TodoAction.toggle(opts.task);\n    return true;\n  };\n})(this);\n\nthis.remove = (function(_this) {\n  return function(e) {\n    return TodoAction.destroy(opts.task);\n  };\n})(this);\n\nthis.hover = (function(_this) {\n  return function(e) {\n    return _this.isHover = true;\n  };\n})(this);\n\nthis.unhover = (function(_this) {\n  return function(e) {\n    return _this.isHover = false;\n  };\n})(this);\n\n});","var riot = require('riot');\n\nriot.tag('todo-remove', '<button if=\"{ completed != 0}\" onclick=\"{ remove }\" class=\"pull-right btn btn-danger btn-xs\">Clear completed ({ completed })</button>', function(opts) {var RiotControl, TodoAction;\n\nRiotControl = require('../riotcontrol');\n\nTodoAction = require('../actions/TodoAction.coffee');\n\nthis.completed = 0;\n\nthis.on('mount', (function(_this) {\n  return function() {\n    return RiotControl.trigger('todo_init');\n  };\n})(this));\n\nRiotControl.on('todos_changed', (function(_this) {\n  return function(todos) {\n    var item, _;\n    _this.completed = ((function() {\n      var _results;\n      _results = [];\n      for (_ in todos) {\n        item = todos[_];\n        if (item.done === true) {\n          _results.push(item);\n        }\n      }\n      return _results;\n    })()).length;\n    return _this.update();\n  };\n})(this));\n\nthis.remove = (function(_this) {\n  return function(e) {\n    return TodoAction.destroyCompleted();\n  };\n})(this);\n\n});","var riot = require('riot');\n\nriot.tag('todo', '<div class=\"row\"><form onsubmit=\"{ add }\" class=\"form-inline\"><div class=\"form-group\"><label for=\"taskinput\">Task</label><input id=\"taskinput\" name=\"input\" onkeyup=\"{ edit }\" class=\"form-control\"></div><button __disabled=\"{ !text }\" class=\"btn btn-default\">Add</button></form></div><ul class=\"list-group\"><li each=\"{ _, task in todos }\" class=\"list-group-item\"><todo-item task=\"{task}\"></todo-item></li></ul><div class=\"row\"><todo-remove></todo-remove></div>', function(opts) {var RiotControl, TodoAction;\n\nRiotControl = require('../riotcontrol');\n\nTodoAction = require('../actions/TodoAction.coffee');\n\nthis.disabled = true;\n\nthis.todos = {};\n\nthis.on('mount', (function(_this) {\n  return function() {\n    return RiotControl.trigger('todo_init');\n  };\n})(this));\n\nRiotControl.on('todos_changed', (function(_this) {\n  return function(todos) {\n    _this.todos = todos;\n    return _this.update();\n  };\n})(this));\n\nthis.edit = (function(_this) {\n  return function(e) {\n    return _this.text = e.target.value;\n  };\n})(this);\n\nthis.add = (function(_this) {\n  return function(e) {\n    if (_this.text) {\n      TodoAction.add(_this.text);\n      return _this.text = _this.input.value = '';\n    }\n  };\n})(this);\n\n});","var RiotControl = {\n  _stores: [],\n  addStore(store) {\n    this._stores.push(store)\n  },\n  trigger() {\n    var args = [].slice.call(arguments)\n      this._stores.forEach(function(el){\n        el.trigger.apply(null, args)\n      })\n  },\n  on(ev, cb) {\n    this._stores.forEach(function(el){\n      el.on(ev, cb)\n    })\n  },\n  off(ev, cb) {\n    this._stores.forEach(function(el){\n      if (cb)\n        el.off(ev, cb)\n      else\n        el.off(ev)\n    })\n  },\n  one(ev, cb) {\n    this._stores.forEach(function(el){\n      el.one(ev, cb)\n    })\n  }\n}\nmodule.exports = RiotControl\n","riot = require('riot')\nTodoStore = ->\n  riot.observable(this)\n\n  @todos = {}\n\n  @on 'todo_add', (newTodo) =>\n    id = (+new Date() + Math.floor(Math.random() * 999999)).toString(36)\n    newTodo['id'] = id\n    @todos[id] = newTodo\n    @trigger 'todos_changed', @todos\n\n  @on 'todo_remove', (id)=>\n    delete @todos[id]\n    @trigger 'todos_changed', @todos\n\n  @on 'todo_toggle', (id)=>\n    @todos[id].done = !@todos[id].done\n    @trigger 'todos_changed', @todos\n\n  @on 'todo_removeCompleted', =>\n    for id, task of @todos\n      if task.done\n        delete @todos[task.id]\n    @trigger 'todos_changed', @todos\n\n  @on 'todo_init', =>\n    @trigger 'todos_changed', @todos\n\nmodule.exports = TodoStore\n","/* Riot 2.0.7, @license MIT, (c) 2015 Muut Inc. + contributors */\n\n;(function() {\n\nvar riot = { version: 'v2.0.7' }\n\n'use strict'\n\nriot.observable = function(el) {\n\n  el = el || {}\n\n  var callbacks = {}\n\n  el.on = function(events, fn) {\n    if (typeof fn == 'function') {\n      events.replace(/\\S+/g, function(name, pos) {\n        (callbacks[name] = callbacks[name] || []).push(fn)\n        fn.typed = pos > 0\n      })\n    }\n    return el\n  }\n\n  el.off = function(events, fn) {\n    if (events == '*') callbacks = {}\n    else if (fn) {\n      var arr = callbacks[events]\n      for (var i = 0, cb; (cb = arr && arr[i]); ++i) {\n        if (cb == fn) { arr.splice(i, 1); i-- }\n      }\n    } else {\n      events.replace(/\\S+/g, function(name) {\n        callbacks[name] = []\n      })\n    }\n    return el\n  }\n\n  // only single event supported\n  el.one = function(name, fn) {\n    if (fn) fn.one = 1\n    return el.on(name, fn)\n  }\n\n  el.trigger = function(name) {\n    var args = [].slice.call(arguments, 1),\n        fns = callbacks[name] || []\n\n    for (var i = 0, fn; (fn = fns[i]); ++i) {\n      if (!fn.busy) {\n        fn.busy = 1\n        fn.apply(el, fn.typed ? [name].concat(args) : args)\n        if (fn.one) { fns.splice(i, 1); i-- }\n         else if (fns[i] !== fn) { i-- } // Makes self-removal possible during iteration\n        fn.busy = 0\n      }\n    }\n\n    return el\n  }\n\n  return el\n\n}\n;(function(riot, evt) {\n\n  // browsers only\n  if (!this.top) return\n\n  var loc = location,\n      fns = riot.observable(),\n      current = hash(),\n      win = window\n\n  function hash() {\n    return loc.hash.slice(1)\n  }\n\n  function parser(path) {\n    return path.split('/')\n  }\n\n  function emit(path) {\n    if (path.type) path = hash()\n\n    if (path != current) {\n      fns.trigger.apply(null, ['H'].concat(parser(path)))\n      current = path\n    }\n  }\n\n  var r = riot.route = function(arg) {\n    // string\n    if (arg[0]) {\n      loc.hash = arg\n      emit(arg)\n\n    // function\n    } else {\n      fns.on('H', arg)\n    }\n  }\n\n  r.exec = function(fn) {\n    fn.apply(null, parser(hash()))\n  }\n\n  r.parser = function(fn) {\n    parser = fn\n  }\n\n  win.addEventListener ? win.addEventListener(evt, emit, false) : win.attachEvent('on' + evt, emit)\n\n})(riot, 'hashchange')\n/*\n\n//// How it works?\n\n\nThree ways:\n\n1. Expressions: tmpl('{ value }', data).\n   Returns the result of evaluated expression as a raw object.\n\n2. Templates: tmpl('Hi { name } { surname }', data).\n   Returns a string with evaluated expressions.\n\n3. Filters: tmpl('{ show: !done, highlight: active }', data).\n   Returns a space separated list of trueish keys (mainly\n   used for setting html classes), e.g. \"show highlight\".\n\n\n// Template examples\n\ntmpl('{ title || \"Untitled\" }', data)\ntmpl('Results are { results ? \"ready\" : \"loading\" }', data)\ntmpl('Today is { new Date() }', data)\ntmpl('{ message.length > 140 && \"Message is too long\" }', data)\ntmpl('This item got { Math.round(rating) } stars', data)\ntmpl('<h1>{ title }</h1>{ body }', data)\n\n\n// Falsy expressions in templates\n\nIn templates (as opposed to single expressions) all falsy values\nexcept zero (undefined/null/false) will default to empty string:\n\ntmpl('{ undefined } - { false } - { null } - { 0 }', {})\n// will return: \" - - - 0\"\n\n*/\n\nriot._tmpl = (function() {\n\n  var cache = {},\n\n      // find variable names\n      re_vars = /(\"|').+?[^\\\\]\\1|\\.\\w*|\\w*:|\\b(?:this|true|false|null|undefined|new|typeof|Number|String|Object|Array|Math|Date|JSON)\\b|([a-z_]\\w*)/gi\n              // [ 1            ][ 2  ][ 3 ][ 4                                                                                        ][ 5       ]\n              // 1. skip quoted strings: \"a b\", 'a b', 'a \\'b\\''\n              // 2. skip object properties: .name\n              // 3. skip object literals: name:\n              // 4. skip reserved words\n              // 5. match var name\n\n  // build a template (or get it from cache), render with data\n\n  return function(str, data) {\n    return str && (cache[str] = cache[str] || tmpl(str))(data)\n  }\n\n\n  // create a template instance\n\n  function tmpl(s, p) {\n    p = (s || '{}')\n\n      // temporarily convert \\{ and \\} to a non-character\n      .replace(/\\\\{/g, '\\uFFF0')\n      .replace(/\\\\}/g, '\\uFFF1')\n\n      // split string to expression and non-expresion parts\n      .split(/({[\\s\\S]*?})/)\n\n    return new Function('d', 'return ' + (\n\n      // is it a single expression or a template? i.e. {x} or <b>{x}</b>\n      !p[0] && !p[2]\n\n        // if expression, evaluate it\n        ? expr(p[1])\n\n        // if template, evaluate all expressions in it\n        : '[' + p.map(function(s, i) {\n\n            // is it an expression or a string (every second part is an expression)\n            return i % 2\n\n              // evaluate the expressions\n              ? expr(s, 1)\n\n              // process string parts of the template:\n              : '\"' + s\n\n                  // preserve new lines\n                  .replace(/\\n/g, '\\\\n')\n\n                  // escape quotes\n                  .replace(/\"/g, '\\\\\"')\n\n                + '\"'\n\n          }).join(',') + '].join(\"\")'\n      )\n\n      // bring escaped { and } back\n      .replace(/\\uFFF0/g, '{')\n      .replace(/\\uFFF1/g, '}')\n\n    )\n\n  }\n\n\n  // parse { ... } expression\n\n  function expr(s, n) {\n    s = s\n\n      // convert new lines to spaces\n      .replace(/\\n/g, ' ')\n\n      // trim whitespace, curly brackets, strip comments\n      .replace(/^[{ ]+|[ }]+$|\\/\\*.+?\\*\\//g, '')\n\n    // is it an object literal? i.e. { key : value }\n    return /^\\s*[\\w-\"']+ *:/.test(s)\n\n      // if object literal, return trueish keys\n      // e.g.: { show: isOpen(), done: item.done } -> \"show done\"\n      ? '[' + s.replace(/\\W*([\\w-]+)\\W*:([^,]+)/g, function(_, k, v) {\n\n          // safely execute vars to prevent undefined value errors\n          return v.replace(/\\w[^,|& ]*/g, function(v) { return wrap(v, n) }) + '?\"' + k + '\":\"\",'\n\n        }) + '].join(\" \")'\n\n      // if js expression, evaluate as javascript\n      : wrap(s, n)\n\n  }\n\n\n  // execute js w/o breaking on errors or undefined vars\n\n  function wrap(s, nonull) {\n    return '(function(v){try{v='\n\n        // prefix vars (name => data.name)\n        + (s.replace(re_vars, function(s, _, v) { return v ? 'd.' + v : s })\n\n          // break the expression if its empty (resulting in undefined value)\n          || 'x')\n\n      + '}finally{return '\n\n        // default to empty string for falsy values except zero\n        + (nonull ? '!v&&v!==0?\"\":v' : 'v')\n\n      + '}}).call(d)'\n  }\n\n})()\n;(function(riot, is_browser) {\n\n  if (!is_browser) return\n\n  var tmpl = riot._tmpl,\n      all_tags = [],\n      tag_impl = {},\n      doc = document\n\n  function each(nodes, fn) {\n    for (var i = 0; i < (nodes || []).length; i++) {\n      if (fn(nodes[i], i) === false) i--\n    }\n  }\n\n  function extend(obj, from) {\n    from && Object.keys(from).map(function(key) {\n      obj[key] = from[key]\n    })\n    return obj\n  }\n\n  function diff(arr1, arr2) {\n    return arr1.filter(function(el) {\n      return arr2.indexOf(el) < 0\n    })\n  }\n\n  function walk(dom, fn) {\n    dom = fn(dom) === false ? dom.nextSibling : dom.firstChild\n\n    while (dom) {\n      walk(dom, fn)\n      dom = dom.nextSibling\n    }\n  }\n\n\n  function mkdom(tmpl) {\n    var tag_name = tmpl.trim().slice(1, 3).toLowerCase(),\n        root_tag = /td|th/.test(tag_name) ? 'tr' : tag_name == 'tr' ? 'tbody' : 'div'\n        el = doc.createElement(root_tag)\n\n    el.innerHTML = tmpl\n    return el\n  }\n\n\n  function update(expressions, instance) {\n\n    // allow recalculation of context data\n    instance.trigger('update')\n\n    each(expressions, function(expr) {\n      var tag = expr.tag,\n          dom = expr.dom\n\n      function remAttr(name) {\n        dom.removeAttribute(name)\n      }\n\n      // loops first: TODO remove from expressions arr\n      if (expr.loop) {\n        remAttr('each')\n        return loop(expr, instance)\n      }\n\n      // custom tag\n      if (tag) return tag.update ? tag.update() :\n        expr.tag = createTag({ tmpl: tag[0], fn: tag[1], root: dom, parent: instance })\n\n\n      var attr_name = expr.attr,\n          value = tmpl(expr.expr, instance)\n\n      if (value == null) value = ''\n\n      // no change\n      if (expr.value === value) return\n      expr.value = value\n\n\n      // text node\n      if (!attr_name) return dom.nodeValue = value\n\n      // attribute\n      if (!value && expr.bool || /obj|func/.test(typeof value)) remAttr(attr_name)\n\n      // event handler\n      if (typeof value == 'function') {\n        dom[attr_name] = function(e) {\n\n          // cross browser event fix\n          e = e || window.event\n          e.which = e.which || e.charCode || e.keyCode\n          e.target = e.target || e.srcElement\n          e.currentTarget = dom\n\n          // currently looped item\n          e.item = instance.__item || instance\n\n          // prevent default behaviour (by default)\n          if (value.call(instance, e) !== true) {\n            e.preventDefault && e.preventDefault()\n            e.returnValue = false\n          }\n\n          instance.update()\n        }\n\n      // show / hide / if\n      } else if (/^(show|hide|if)$/.test(attr_name)) {\n        remAttr(attr_name)\n        if (attr_name == 'hide') value = !value\n        dom.style.display = value ? '' : 'none'\n\n      // normal attribute\n      } else {\n        if (expr.bool) {\n          dom[attr_name] = value\n          if (!value) return\n          value = attr_name\n        }\n\n        dom.setAttribute(attr_name, value)\n      }\n\n    })\n\n    instance.trigger('updated')\n\n  }\n\n  function parse(root) {\n\n    var named_elements = {},\n        expressions = []\n\n    walk(root, function(dom) {\n\n      var type = dom.nodeType,\n          value = dom.nodeValue\n\n      // text node\n      if (type == 3 && dom.parentNode.tagName != 'STYLE') {\n        addExpr(dom, value)\n\n      // element\n      } else if (type == 1) {\n\n        // loop?\n        value = dom.getAttribute('each')\n\n        if (value) {\n          addExpr(dom, value, { loop: 1 })\n          return false\n        }\n\n        // custom tag?\n        var tag = tag_impl[dom.tagName.toLowerCase()]\n\n        // attributes\n        each(dom.attributes, function(attr) {\n          var name = attr.name,\n              value = attr.value\n\n          // named elements\n          if (/^(name|id)$/.test(name)) named_elements[value] = dom\n\n          // expressions\n          if (!tag) {\n            var bool = name.split('__')[1]\n            addExpr(dom, value, { attr: bool || name, bool: bool })\n            if (bool) {\n              dom.removeAttribute(name)\n              return false\n            }\n          }\n\n        })\n\n        if (tag) addExpr(dom, 0, { tag: tag })\n\n      }\n\n    })\n\n    return { expr: expressions, elem: named_elements }\n\n    function addExpr(dom, value, data) {\n      if (value ? value.indexOf('{') >= 0 : data) {\n        var expr = { dom: dom, expr: value }\n        expressions.push(extend(expr, data || {}))\n      }\n    }\n  }\n\n\n\n  // create new custom tag (component)\n  function createTag(conf) {\n\n    var opts = conf.opts || {},\n        dom = mkdom(conf.tmpl),\n        mountNode = conf.root,\n        parent = conf.parent,\n        ast = parse(dom),\n        tag = { root: mountNode, opts: opts, parent: parent, __item: conf.item },\n        attributes = {}\n\n    // named elements\n    extend(tag, ast.elem)\n\n    // attributes\n    each(mountNode.attributes, function(attr) {\n      attributes[attr.name] = attr.value\n    })\n\n    function updateOpts() {\n      Object.keys(attributes).map(function(name) {\n        var val = opts[name] = tmpl(attributes[name], parent || tag)\n        if (typeof val == 'object') mountNode.removeAttribute(name)\n      })\n    }\n\n    updateOpts()\n\n    if (!tag.on) {\n      riot.observable(tag)\n      delete tag.off // off method not needed\n    }\n\n    if (conf.fn) conf.fn.call(tag, opts)\n\n\n    tag.update = function(data, _system) {\n\n      /*\n        If loop is defined on the root of the HTML template\n        the original parent is a temporary <div/> by mkdom()\n      */\n      if (parent && dom && !dom.firstChild) {\n        mountNode = parent.root\n        dom = null\n      }\n\n      if (_system || doc.body.contains(mountNode)) {\n        extend(tag, data)\n        extend(tag, tag.__item)\n        updateOpts()\n        update(ast.expr, tag)\n\n        // update parent\n        !_system && tag.__item && parent.update()\n        return true\n\n      } else {\n        tag.trigger('unmount')\n      }\n\n    }\n\n    tag.update(0, true)\n\n    // append to root\n    while (dom.firstChild) {\n      if (conf.before) mountNode.insertBefore(dom.firstChild, conf.before)\n      else mountNode.appendChild(dom.firstChild)\n    }\n\n\n    tag.trigger('mount')\n\n    all_tags.push(tag)\n\n    return tag\n  }\n\n\n  function loop(expr, instance) {\n\n    // initialize once\n    if (expr.done) return\n    expr.done = true\n\n    var dom = expr.dom,\n        prev = dom.previousSibling,\n        root = dom.parentNode,\n        template = dom.outerHTML,\n        val = expr.expr,\n        els = val.split(/\\s+in\\s+/),\n        rendered = [],\n        checksum,\n        keys\n\n\n    if (els[1]) {\n      val = '{ ' + els[1]\n      keys = els[0].slice(1).trim().split(/,\\s*/)\n    }\n\n    // clean template code\n    instance.one('mount', function() {\n      var p = dom.parentNode\n      if (p) {\n        root = p\n        root.removeChild(dom)\n      }\n    })\n\n    function startPos() {\n      return Array.prototype.indexOf.call(root.childNodes, prev) + 1\n    }\n\n    instance.on('updated', function() {\n\n      var items = tmpl(val, instance)\n          is_array = Array.isArray(items)\n\n      if (is_array) items = items.slice(0)\n\n      else {\n\n        if (!items) return // some IE8 issue\n\n        // detect Object changes\n        var testsum = JSON.stringify(items)\n        if (testsum == checksum) return\n        checksum = testsum\n\n        items = Object.keys(items).map(function(key, i) {\n          var item = {}\n          item[keys[0]] = key\n          item[keys[1]] = items[key]\n          return item\n        })\n\n      }\n\n      // remove redundant\n      diff(rendered, items).map(function(item) {\n        var pos = rendered.indexOf(item)\n        root.removeChild(root.childNodes[startPos() + pos])\n        rendered.splice(pos, 1)\n      })\n\n      // add new\n      diff(items, rendered).map(function(item, i) {\n        var pos = items.indexOf(item)\n\n        // string array\n        if (keys && !checksum) {\n          var obj = {}\n          obj[keys[0]] = item\n          obj[keys[1]] = pos\n          item = obj\n        }\n\n        var tag = createTag({\n          before: root.childNodes[startPos() + pos],\n          parent: instance,\n          tmpl: template,\n          item: item,\n          root: root\n        })\n\n        instance.on('update', function() {\n          tag.update(0, true)\n        })\n\n      })\n\n      // assign rendered\n      rendered = items\n\n    })\n\n  }\n\n  riot.tag = function(name, tmpl, fn) {\n    fn = fn || noop,\n    tag_impl[name] = [tmpl, fn]\n  }\n\n  riot.mountTo = function(node, tagName, opts) {\n    var tag = tag_impl[tagName]\n    return tag && createTag({ tmpl: tag[0], fn: tag[1], root: node, opts: opts })\n  }\n\n  riot.mount = function(selector, opts) {\n    if (selector == '*') selector = Object.keys(tag_impl).join(', ')\n\n    var instances = []\n\n    each(doc.querySelectorAll(selector), function(node) {\n      if (node.riot) return\n\n      var tagName = node.tagName.toLowerCase(),\n          instance = riot.mountTo(node, tagName, opts)\n\n      if (instance) {\n        instances.push(instance)\n        node.riot = 1\n      }\n    })\n\n    return instances\n  }\n\n  // update everything\n  riot.update = function() {\n    return all_tags = all_tags.filter(function(tag) {\n      return !!tag.update()\n    })\n  }\n\n})(riot, this.top)\n\n\n// support CommonJS\nif (typeof exports === 'object')\n  module.exports = riot\n\n// support AMD\nelse if (typeof define === 'function' && define.amd)\n  define(function() { return riot })\n\n// support browser\nelse\n  this.riot = riot\n\n})();"]}